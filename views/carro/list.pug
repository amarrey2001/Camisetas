extends ../layouts/main

block contenido
    h2.mt-4.text-center(style="color:#f5f5f5;") Mi Cesta de la Compra

    if items && items.length > 0
        div.table-responsive.mt-4
            table.table.table-dark.table-hover.align-middle
                thead(style="background-color:#1c1c1c; color:#f5f5f5;")
                    tr
                        th Producto
                        th.text-center Precio
                        th.text-center Cantidad
                        th.text-end Subtotal
                        th.text-center Acciones
                tbody
                    each item in items
                        tr
                            //- Columna Producto
                            td
                                div.d-flex.align-items-center
                                    //- Círculo de color
                                    div(style=`width: 30px; height: 30px; border-radius: 50%; background-color: ${item.color}; border: 1px solid #333; margin-right: 15px;`)

                                    div
                                        h5.mb-0(style="color:#f5f5f5;")= item.marca
                                        small.text-muted(style="color:#b0b0b0;") Talla: #{item.talla.toUpperCase()} | #{item.sexo}

                            //- Columna Precio
                            td.text-center(style="color:#f5f5f5;") #{Number(item.precio_unitario).toFixed(2)} €

                            //- Columna Cantidad
                            td.text-center(style="color:#f5f5f5;")
                                strong #{item.cantidad}

                            //- Columna Subtotal
                            td.text-end.fw-bold(style="color:#f5f5f5;") #{Number(item.subtotal).toFixed(2)} €

                            //- Columna Acciones (Botón Eliminar)
                            td.text-center
                                form(action=`/carro/delete/${item.id}`, method="POST")
                                    button.btn.btn-outline-danger.btn-sm(type="submit") Eliminar

        //- Sección de Totales y Botones
        div.row.mt-4.mb-5
            div.col-md-6
                a.btn.btn-secondary(href="/") Seguir comprando

            div.col-md-6.text-end
                div.card.bg-dark(style="border:none;")
                    div.card-body
                        //- Total General
                        h4 Total a Pagar:
                            span.text-success.ms-2 #{Number(total).toFixed(2)} €

                        a.btn.btn-success.btn-lg.w-100.mt-3(href="/pedido/tramitar") Tramitar Pedido

    else
        div.alert.alert-info.mt-4.text-center
            h4 Tu cesta está vacía
            p.mb-4 No has añadido ninguna camiseta todavía.
            a.btn.btn-primary(href="/") Ir al Catálogo
